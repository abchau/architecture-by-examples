= Hexagonal Architecture (Ports and Adapters)

:imagesdir: docs/images
:imagesoutdir: docs/images

== Usage

[source,bash]
----
./mvnw spring-boot:run
----


[plantuml]
....
@startuml
'left to right direction
'skinparam linetype polyline
'skinparam linetype ortho

circle http

rectangle user_interface as "User Interface" {
	rectangle input_adapter as "Input Adapter"
}

	hexagon application as "Application" {
		rectangle facade as "Facade"

		hexagon domain_model as "Domain Model" {
			rectangle use_case as "Use Cases"
			rectangle entity as "Entity"
		}
	}
	
rectangle infrastructure as "Infrastructure" {
	rectangle output_adapter as "Output Adapter"
}

database db

http -right-> input_adapter
input_adapter -right-> facade 
facade -right-> use_case
use_case -right-> output_adapter
output_adapter -right-> db
use_case -down-> entity

@enduml
....

== Flow

.Sequence Diagram for Hexagonal Architecture
ifdef::env-github[]
image::sequence.png[]
endif::env-github[]
ifdef::env-idea,env-vscode[]
plantuml::docs/diagrams/sequence.puml[target=sequence,format=png]
endif::env-idea,env-vscode[]

== Packages

[cols="1,2",options=header]
|===
|Package|Description
|`inputadapter.web`|Web Input Adapter
|`application`|Application
|`application.core`|Application Core
|`application.core.usecase`|Business Use Cases
|`outputadapter.persistence.jpa`|JPA Persistence Output Adapter
|===

* `*SubscriptionController*`: receives tasks from specific interface
* `*SubscriptionFacadeImpl*`: task coordination, transaction, anti-corruption
* `*CreateSubscriptionUseCase*`: business logic
* `*JpaSubscriptionAdapter*`: anti-corruption, delegate persistence operations to `SubscriptionPersistenceJpaRepository`
* `*SubscriptionPersistenceJpaRepository*`: do technology-specified persistence operations

NOTE: idea that are not important to demonstrate *Ports and Adapters* are not included

.Class Diagram for Hexagonal Architecture
ifdef::env-github[]
image::class.png[]
endif::env-github[]
ifdef::env-idea,env-vscode[]
plantuml::docs/diagrams/class.puml[target=class,format=png]
endif::env-idea,env-vscode[]